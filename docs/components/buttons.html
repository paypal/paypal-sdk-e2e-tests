<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>PayPal JS SDK Buttons Test Page</title>
    </head>
    <body>
        <h1>PayPal JS SDK Buttons Test Page</h1>
        <performance-table></performance-table>

        <div id="buttons-container"></div>

        <script type="module">
            import { loadScript } from "https://unpkg.com/@paypal/paypal-js@4.2.1/dist/esm/paypal-js.js";
            import { getOptionsFromQueryString } from "../utils.js";

            const options = {
                "client-id": "test",
                cachebust: "calzone",
                ...getOptionsFromQueryString(),
            };

            function createOrderCallback(data, actions) {
                return actions.order
                    .create({
                        purchase_units: [
                            {
                                amount: {
                                    value: 2.0,
                                },
                            },
                        ],
                    })
                    .then((orderID) => {
                        console.log({ orderID });
                        return orderID;
                    });
            }

            function onApproveCallback(data, actions) {
                return actions.order.capture().then((orderDetails) => {
                    console.log({ orderDetails });
                });
            }

            loadScript(options).then((paypal) => {
                paypal
                    .Buttons({
                        createOrder: createOrderCallback,
                        onApprove: onApproveCallback,
                    })
                    .render("#buttons-container");
            });
        </script>
        <script src="../performance-table.js"></script>
    </body>
</html>
